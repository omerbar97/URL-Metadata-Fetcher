"use strict";
var express = require('express');
var route_1 = require('./route');
var Server = (function () {
    function Server() {
        this.app = express();
        this.route = new route_1.default('/', 'index');
    }
    Server.prototype.listen = function (callback) {
        this.setup();
        this.app.listen(3000, callback);
    };
    Server.prototype.setup = function () {
        var _this = this;
        var addRoute = (function (route, pathPrefix) {
            if (pathPrefix === void 0) { pathPrefix = ''; }
            var path = pathPrefix + route.path;
            if (route.post) {
                _this.app.post(path, route.post);
            }
            else if (route.get) {
                _this.app.get(path, route.get);
            }
            route.children.map((function (collectable, route) {
                addRoute.call(_this, route, path);
            }).bind(_this));
        }).bind(this);
        addRoute(this.route);
    };
    return Server;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Server;
exports.Server = Server;
