import Server from '../src/server';
import Route from '../src/route';

import * as assert from 'assert';

describe('Server', function() {
  let server:Server;

  it('should initialize server', function() {
    server = new Server();
  });

  it('should add route', function() {
    class MyRoute extends Route {
      constructor() {
        super('/', 'my-page');
      }

      get(req, res) {
        res.send('test');
        res.end();
      }
    }

    server.route.children.push(new MyRoute());

    assert.equal(server.route.children.count(), 1);
  });

  it('should setup express app and listen', function(done) {
    server.listen(function() {
      done();
    });
  });


});
